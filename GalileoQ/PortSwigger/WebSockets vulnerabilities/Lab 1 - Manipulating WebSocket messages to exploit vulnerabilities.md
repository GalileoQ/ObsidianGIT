`TAREA:` Esta tienda en línea tiene una función de chat en vivo implementada mediante WebSockets. Los mensajes de chat que usted envía son vistos por un agente de soporte en tiempo real. Para resolver el laboratorio, use un mensaje WebSocket para activar un `alert()`ventana emergente en el navegador del agente de soporte.

lo primero que vamos hacer es interactuar con el `Live Chat` 
![[Pasted image 20250728123028.png]]

analizamos la petición del mensaje que hemos hecho en el `Live Chat` y vemos que la estructura es "user" "content" esto puede significar que la base de datos esta guardando esta petición y luego me la esta enviando
![[Pasted image 20250728123743.png]]

despues de tener esta informacion sabemos que nuestra tarea es generar un mensaje de alerta asi que lo vamos a intentar con un mensaje XSS

```python
<img src=1 onerror='alert(hakeando)'>
```

`NOTA:` sabemos que nuestro mensaje se esta almacenando en un Json asi que debemos tener cuidado con las comillas. para escaparlas usaremos /
![[Pasted image 20250728124124.png]]

podemos observar que tenemos una `String` una cadena de texto. no se ha cargado como una imagen por lo que el servidor no esta interpretando este código
![[Pasted image 20250728124735.png]]

la respuesta de parte de el servidor esta estructurada de esta forma. esto es curioso porque `&lt;` y `&gt` y `&#39;` representa `< > '` así que probablemente estos caracteres no le están gustando al servidor. vamos a limpiar un poco 
![[Pasted image 20250728144705.png]]

debemos interceptar esta petición y desde el intruder podemos modificarla. debemos reemplazar las partes que el servidor esta codificando y limpiar la syntax para que el servidor pueda interpretar de manera correcta el payload

```python
{
"message":"<img src=0 onerror=\"alert(Hackeado)\">"
}
```

![[Pasted image 20250728163143.png]]

efectivamente esto nos genera una alerta `XSS`
![[Pasted image 20250728162704.png]]