`TAREA:` Para resolver el laboratorio, busque la clave API del usuario `carlos`Puedes iniciar sesión en tu cuenta con las siguientes credenciales: `wiener:peter`.

iniciamos sesión en el laboratorio y nos entregan una API
![[Pasted image 20250722162015.png]]

en este caso tendremos que interceptar la solicitud de inicio de sesión ya que es la que nos entrega la API. realizando pruebas identificamos que al agregar una extensión estática a la ruta URL, por ejemplo `/my-account/abc.js` 

Observe que la respuesta contiene los encabezados `X-Cache: miss` y `Cache-Control: max-age=30` El encabezado `X-Cache: miss` indica que la respuesta no fue obtenida de la caché. El encabezado `Cache-Control: max-age=30` sugiere que, si la respuesta se almacena en caché, debe mantenerse en la caché durante 30 segundos.
`X-Cache: miss`
![[Pasted image 20250722162905.png]]

`Cache-Control: max-age=30`
después de 30 segundos. Observa que el valor del encabezado `X-Cache` cambia a `HIT`. Esto demuestra que la respuesta fue servida desde la caché. A partir de esto, podemos inferir que el sistema de caché interpreta la ruta URL como `/my-account/abc.js` y que tiene una regla de almacenamiento en caché basada en la extensión `.js`. Podemos usar esta información para construir un payload que explote este comportamiento."
![[Pasted image 20250722163505.png]]

ahora en el servido de exploit de la web inyectamos el exploit que redirija al usuario víctima `carlos` hacia una URL maliciosa que hemos creado con `/my-account/abc.js`


`<script>document.location="https://YOUR-LAB-ID.web-security-academy.net/my-account/wcd.js"</script>`

Luego, haz clic en el botón **"Deliver exploit to victim"**.

Cuando la víctima accede al exploit, la respuesta que recibe de esa URL será **almacenada en caché por el servidor**.

Después, **abre tú mismo la URL** a la que enviaste a carlos:

perl

CopiarEditar

`https://YOUR-LAB-ID.web-security-academy.net/my-account/wcd.js`

Verás que la respuesta **incluye la clave API de carlos**. Cópiala como parte del reto.
![[Pasted image 20250722164202.png]]